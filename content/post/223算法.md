---
author: ["æŸ¯æ£‹ç€š"]
title: "article recommendation in Hugo æ–‡ç« æ¨è–¦èˆ‰ä¾‹"
date: 2020-04-14
lastmod: 2020-08-06
categories: ["ç«™å‹™"]
tags: ["coding"]
url: 223
description: 'ç¶“éè‰±è‹¦å“çµ•çš„è©¦é©—ï¼Œç¶²ç«™ç¬¬å››ç‰ˆçµ‚æ–¼å®Œå·¥äº†ï¼ç¾åœ¨ä»‹ç´¹ä¸€ä¸‹æœ¬ç«™å„é¡æ¨è–¦ä¸­ç”¨åˆ°çš„ç®—æ³•ã€‚æœ¬äººä¸æ‡‚ç·¨ç¨‹ï¼Œé€™è£åªæ˜¯çè²“æ’ä¸Šæ­»è€—å­ã€‚æºç¢¼ç›´æ¥åœ¨æˆ‘ <a href="https://github.com/kujihhoe/HUGO-Theme-CJK" targrt="_blank">Github</a> ä¸Šæ‰¾å°±å¯ä»¥ï¼Œåˆ†åˆ¥åœ¨ home.html å’Œ single.htmlã€‚å¾Œä¾†ç™¼ç¾æœ‰äº›å¯«éº»ç…©äº†ï¼Œæ‡¶å¾—æ”¹äº†ã€‚'
vertical: false
img: 'https://pic.imgdb.cn/item/5f22212d14195aa594dfd532.jpg'
---

æœ¬ç«™çš„ç´¢å¼• taxonomies æœ‰åˆ†é¡ categoriesã€ç³»åˆ— seriesã€æ¨™ç±¤ tagsã€ä½œè€… authorã€å‚™è¨» notesã€‚æ¯ç¯‡æ–‡ç« éƒ½æœ‰ 1 ç®‡åˆ†é¡ã€0-1 å€‹ç³»åˆ—ã€0-3 å€‹æ¨™ç±¤ã€0-1 ç®‡å‚™è¨»ã€‚åˆ†çˆ²ç½‘èªŒã€è®€æ›¸ã€ä½œå“ã€æ˜¥ç§‹å­¸åˆŠç­‰ `section`ã€‚

## ä¸€ç´šé›£åº¦

å¾ç°¡å–®çš„é–‹å§‹èªªã€‚ä»¥ä¸‹éƒ½æ˜¯ä¸»è‘‰ä¸­çš„ã€‚

### ä½œå“

<img src="https://pic.imgdb.cn/item/5e952d72c2a9a83be5821683.jpg">

ã€Œä½œå“ã€çš„ `section` æ˜¯ `gallery`ã€‚æŒ‰ä¿®æ”¹æ™‚é–“å€’åºåˆ—å‡ºæ‰€æœ‰ `type` æ˜¯ `gallery` çš„æ–‡ç« ï¼š

```html
{{ range  (where .Site.RegularPages.ByLastmod.Reverse "Type" "gallery") }}
    <a href="{{ .Permalink }}">{{ .Title }}</a>
{{ end }}
```

## äºŒç´šé›£åº¦

### æœ€è¿‘ä¿®æ”¹

<img src="https://pic.imgdb.cn/item/5e952d72c2a9a83be582167f.jpg">

æ€è·¯å¦‚ä¸‹ï¼š

1. æŒ‰æœ€è¿‘ä¿®æ”¹æ™‚é–“å€’åºï¼Œåˆ—å‡ºæ‰€æœ‰æ–‡ç« 
2. ç¯©é¸å‡ºæ‰€æœ‰ç™¼å¸ƒæ™‚é–“å’Œä¿®æ”¹æ™‚é–“ä¸ä¸€è‡´çš„æ–‡ç« 
3. æ’é™¤æœ€è¿‘ç™¼å¸ƒå‡ºç¾çš„æ–‡ç« 
4. åˆ—å‡ºå‰ 4 é …

```html
{{ $latest := slice }}
{{ range first 8 (where .Site.RegularPages.ByPublishDate.Reverse "Type" "post") }}
    {{ $latest = $latest | append . }}
{{ end }}  

{{ $1lastmod := slice }}
{{ $lastmod := slice }}
{{ range (where .Site.RegularPages.ByLastmod.Reverse "Type" "post") }}
    {{ if ne .Lastmod .Date }}
        {{ $1lastmod = $1lastmod | append . }}
        {{ $lastmod = $1lastmod | complement $latest }}
    {{ end }}
{{ end }}

{{ range first 4 $lastmod }}
    <a href="{{ .Permalink }}">{{ .Title }}</a>
{{ end }}
```

æœ€ç°¡å–®çš„æ–¹æ³•å°±æ˜¯ç›´æ¥æŒ‰ä¿®æ”¹æ™‚é–“å€’åºåˆ—å‡ºï¼Œä½†æ˜¯å¤§éƒ¨åˆ†éƒ½æœƒå’Œæœ€è¿‘ç™¼å¸ƒé‡è¤‡ï¼Œå°±é¡¯å¾—æ²’æ„ç¾©äº†ã€‚

### å°é¢ç½®é ‚

<img src="https://pic.imgdb.cn/item/5f2b679414195aa594429671.jpg">

4 å¼µåœ–ç‰‡ï¼Œæˆ‘é€™æ¨£å®‰æ’ï¼š1 å¼µé™¤äº†ç¶²å€ä¹‹å¤–çš„æœ€è¿‘ç™¼å¸ƒï¼›2 å¼µé™¤äº†ç¶²å€ä¹‹å¤–çš„æœ€è¿‘ä¿®æ”¹ï¼›éš¨æ©Ÿ 1 å¼µå¹´åº¦ ğŸ”ã€‚

```html
{{- range first 1 (where .Site.RegularPages.ByDate.Reverse "Type" "in" site.Params.otherSections) -}}
    <div>
        <a href="{{ .Permalink }}"target="_blank">
            <div class="recommendation-card" style="background-image: url({{ .Params.img }})"></div>
        </a>
    </div>
{{ end }}

{{ $sitelastmod := slice }}
{{ range (where .Site.RegularPages.ByLastmod.Reverse "Type" "in" site.Params.otherSections) }}
    {{ if ne .Lastmod .Date }}
        {{ $sitelastmod = $sitelastmod | append . }}
    {{ end }}
{{ end }}

{{ range first 2 $sitelastmod }}
    <div>
        <a href="{{ .Permalink }}"target="_blank">
            <div class="recommendation-card" style="background-image: url({{ .Params.img }})"></div>
        </a>
    </div>
{{ end }}

{{ range first 1 (shuffle ( .Site.Menus.top)) }}
    <div>
        <a href="{{ .Page.Permalink }}"  target="_blank">
            <div class="recommendation-card" style="background-image: url({{ .Page.Params.img }})"></div>
        </a>
    </div>
{{ end }}
```

ç•¶ç„¶ï¼Œä½ å…ˆè¦åœ¨å…¨ç«™é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Šï¼š

```toml
[params]
  otherSections = ["exam","gallery","net","read"]  
```

### å…¶ä»–ä½œè€…

<img src="https://pic.imgdb.cn/item/5e952d72c2a9a83be5821686.jpg" width="400">

åŒç†ï¼Œé‚„æœ‰å…¶ä»–ä½œè€…ï¼š

1. åˆ—å‡ºæ‰€æœ‰ä½œè€…
2. ç¯©é¸å‡ºä¸æ˜¯ã€ŒæŸ¯æ£‹ç€šã€ã€ŒæŸ¯æ£‹ç€šæ•´ç†ã€çš„ä½œè€…
3. éš¨æ©Ÿåˆ—å‡ºé€™äº›ä½œè€…åŠä»–å€‘çš„æ–‡ç« 

```html
{{ $author := slice }}
{{ range .Site.Taxonomies.author.ByCount }}
    {{ if ne .Page.Title  ["æŸ¯æ£‹ç€š"] ["æŸ¯æ£‹ç€šæ•´ç†"] }}
        {{ $author = $author | append . }}
    {{ end }}
{{ end }}
{{ range $author  | shuffle  }}
    <a href="{{ .Page.RelPermalink }}">{{ .Page.Title }}</a>
    {{ range .Pages  | shuffle }}
        <li><a href="{{ .Permalink }}">{{ .Title }}</a></li>
    {{ end }}
{{ end }}
```

### éå»èˆ‡æœªä¾†çš„çš„æœ¬å‘¨

æ–‡ç« é é¢ä¸‹çš„ã€Œéå»çš„æœ¬å‘¨ã€ï¼Œç°¡å–®ç²—æš´ç”¨äº†æŸ»è¡¨æ³•ã€‚`.Unix` èªæ³•è¦‹ https://gohugo.io/functions/unix/ï¼Œæ˜¯å¾ 1970-01-01 é–‹å§‹ç´¯åŠ çš„ç§’æ•¸ã€‚

æˆ‘é€™ç•¶ç„¶ä¸æ˜¯æº–ç¢ºçš„ã€Œæœ¬å‘¨ã€ï¼Œæˆ‘ç®—çš„æ˜¯å‘å‰å¾ŒåŠ æ¸›ä¸‰å¤©ã€‚ä¸€å¤© 86,400sï¼Œä¸€å¹´ 315,360sï¼Œä¸€é–å¹´ 316,224sã€‚æˆ‘å°‡å¼Ÿ 4ã€8 å¹´è¨­çˆ²é–å¹´ã€‚äºæ˜¯æ€è·¯å¾ˆç°¡å–®äº†ï¼š

```html
{{ $1date := sub .Date.Unix 31276800  }}
{{ $2date := sub .Date.Unix 31795200 }}
{{ $3date := sub .Date.Unix 62812800 }}
{{ $4date := sub .Date.Unix  63331200 }}
{{ $5date := sub .Date.Unix 94348800 }}
{{ $6date := sub .Date.Unix  94867200 }}
{{ $7date := sub .Date.Unix 125971200 }}
{{ $8date := sub .Date.Unix 126489600 }}
{{ $9date := sub .Date.Unix 157507200 }}
{{ $10date := sub .Date.Unix 158025600 }}
{{ $11date := sub .Date.Unix 189043200 }}
{{ $12date := sub .Date.Unix 189561600 }}
{{ $13date := sub .Date.Unix 220579200 }}
{{ $14date := sub .Date.Unix  221097600 }}
{{ $15date := sub .Date.Unix 252201600 }}
{{ $16date := sub .Date.Unix  252720000 }}
{{ $21date := add .Date.Unix 31276800  }}
{{ $22date := add .Date.Unix 31795200 }}
{{ $23date := add .Date.Unix 62812800 }}
{{ $24date := add .Date.Unix  63331200 }}
{{ $25date := add .Date.Unix 94348800 }}
{{ $26date := add .Date.Unix  94867200 }}
{{ $27date := add .Date.Unix 125971200 }}
{{ $28date := add .Date.Unix 126489600 }}
{{ $29date := add .Date.Unix 157507200 }}
{{ $30date := add .Date.Unix 158025600 }}
{{ $31date := add .Date.Unix 189043200 }}
{{ $32date := add .Date.Unix 189561600 }}
{{ $33date := add .Date.Unix 220579200 }}
{{ $34date := add .Date.Unix  221097600 }}
{{ $35date := add .Date.Unix 252201600 }}
{{ $36date := add .Date.Unix  252720000 }}
<ul>
{{ range  (where .Site.RegularPages.ByDate "Type" "post") }}
{{ $currentdate := .Date.Unix }}
{{ if and (ge $currentdate $2date) (le $currentdate $1date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ else if and (ge $currentdate $4date) (le $currentdate $3date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ else if and (ge $currentdate $6date) (le $currentdate $5date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ else if and (ge $currentdate $8date) (le $currentdate $7date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ else if and (ge $currentdate $10date) (le $currentdate $9date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ else if and (ge $currentdate $12date) (le $currentdate $11date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ else if and (ge $currentdate $14date) (le $currentdate $13date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ else if and (ge $currentdate $16date) (le $currentdate $15date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ else if and (ge $currentdate $21date) (le $currentdate $22date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ else if and (ge $currentdate $23date) (le $currentdate $24date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ else if and (ge $currentdate $25date) (le $currentdate $26date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ else if and (ge $currentdate $27date) (le $currentdate $28date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ else if and (ge $currentdate $29date) (le $currentdate $30date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ else if and (ge $currentdate $31date) (le $currentdate $32date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ else if and (ge $currentdate $33date) (le $currentdate $34date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ else if and (ge $currentdate $35date) (le $currentdate $36date) }}
<li><a href="{{ .RelPermalink }}">{{ .Title | safeHTML }}</a> <time>{{  .Date.Format "2006-01-02" }}</time></li>
{{ end }}
{{ end }}
</ul>
```

## ä¸‰ç´šé›£åº¦

### åˆ†é¡

<img src="https://pic.imgdb.cn/item/5e999ffcc2a9a83be5d3a737.jpg">

ä¸»è‘‰ä¸Šã€Œåˆ†é¡ã€çš„ç›®çš„æ˜¯è®“æ–°è®€è€…å¿«é€Ÿç­è§£ç½‘èªŒæ‰€æœ‰æ–‡ç« é¡å‹ï¼Œæ‰€ä»¥æˆ‘æƒ³åœ¨æ¯å€‹åˆ†é¡ä¸‹é¢ç”Ÿæˆå…©é …æœ€è¿‘ç™¼å¸ƒå’Œå…©é …éš¨æ©Ÿæ¨è–¦ã€‚åŒæ™‚ï¼Œåˆ†é¡å¾Œé¢æœ‰ã€Œèµ«èµ«æŒ‡å—ã€å’Œã€Œè³‡æºã€å…©å€‹ç³»åˆ—ï¼Œéœ€è¦æŠŠå®ƒå€‘æ’é™¤äº†ã€‚å¤§æ§©æ€è·¯å¦‚ä¸‹ï¼š

1. éš¨æ©Ÿæ’åˆ—æ‰€æœ‰åˆ†é¡
2. ç”Ÿæˆå…©é …æœ€è¿‘ç™¼å¸ƒ
3. éš¨æ©Ÿç”Ÿæˆå…©é …ç³»åˆ—ä¸æ˜¯ã€Œèµ«èµ«æŒ‡å—ã€å’Œã€Œè³‡æºã€çš„é …ç›®

å…·é«”æ€è·¯è¦‹ä»£ç¢¼å¡Šä¸­çš„è¨»é‡‹ã€‚

<img src="https://pic.imgdb.cn/item/5e9a7628c2a9a83be56e26f4.jpg" width="300">

```html
<!--  1ã€ç”Ÿæˆæ‰€æœ‰ç³»åˆ—ä¸æ˜¯èµ«èµ«æŒ‡å—ï½œè³‡æºï½œçš„æ–‡ç« ã€‚ -->
{{ $series := slice }}
{{ $1series := slice }}
{{ $2series := slice }}
{{ range .Site.Taxonomies.series.èµ«èµ«æŒ‡å— }}
    {{ $1series = $1series | append .Page }}
{{ end }}
{{ range .Site.Taxonomies.series.è³‡æº }}
    {{ $2series = $2series | append .Page }}
{{ end }}
{{ with (where .Site.RegularPages "Type" "post") }}
    {{ $series = . | complement $1series $2series }}
{{ end }}
<!--  2ã€éš¨æ©Ÿæ’åˆ—æ‰€æœ‰åˆ†é¡ -->
{{ $allCate := where .Site.Taxonomies.categories "Type" "post" }}
{{ range $allCate.ByCount  | shuffle }}
    {{ $first2 := slice }}
    {{ $thisCateinSeries := slice }}
    {{ $end := slice }}
    {{ $thisCate := slice }}
<!-- 3ã€ç”Ÿæˆå…©é …æœ€è¿‘ç™¼å¸ƒ  -->    
    {{ range first 2 .Pages }}
        {{ $first2 = $first2 | append . }}
    {{ end }}
<!-- 4ã€ç”Ÿæˆ 3 å’Œ 1 çš„äº¤é›†ï¼Œå½åœ¨æœ€è¿‘å…©é …ä¸­æ’é™¤ç³»åˆ—æ˜¯èµ«èµ«æŒ‡å—ï½œè³‡æºï½œçš„  -->    
    {{ $First2inSeries :=  intersect $series $first2  }}
<!-- 5ã€ç”Ÿæˆé€™å€‹åˆ†é¡ä¸‹æ‰€æœ‰æ–‡ç«   -->    
    {{ range .Pages | shuffle }}
        {{ $thisCate = $thisCate | append . }}
    {{ end }}
<!-- 6ã€ç”Ÿæˆ 5 å’Œ 1 çš„äº¤é›†ï¼Œå½åœ¨é€™å€‹åˆ†é¡æ‰€æœ‰æ–‡ç« ä¸­æ’é™¤ç³»åˆ—æ˜¯èµ«èµ«æŒ‡å—ï½œè³‡æºï½œçš„ -->    
    {{ $thisCateinSeries := intersect $thisCate $series }}
<!-- 7ã€ç”Ÿæˆ 6 å’Œ 4 çš„è£œé›†ï¼Œå½åœ¨é€™å€‹åˆ†é¡æ‰€æœ‰æ–‡ç« ä¸­æ’é™¤ç³»åˆ—æ˜¯èµ«èµ«æŒ‡å—ï½œè³‡æºï½œçš„ï¼Œä»¥åŠæœ€è¿‘å…©é …  -->    
    {{ $end := $thisCateinSeries | complement $First2inSeries  }}
    <ol>
<!-- 8ã€çµæœ  -->         
        <h2><a href="{{ .Page.Permalink }}">{{ .Page.Title | safeHTML  }}</a></h2>
        <div class="des-base" style="margin-top:.5em;text-align:left">æœ€è¿‘ç™¼å¸ƒ</div>
        {{ range $first2 }}
            <div><a href="{{ .Permalink }}">{{ .Title | safeHTML  }}</a></div>
        {{ end }}
        <div>éš¨æ©Ÿæ¨è–¦</div>
        {{ range first 2 $end | shuffle }}
            <div><a href="{{ .Permalink }}">{{ .Title | safeHTML  }}</a></div>
        {{ end }}
    </ol>
{{ end }}
```

### æ‚¨å¯èƒ½å–œæ­¡

ä»¥ä¸‹æ˜¯å„æ–‡ç« ä¸‹é¢çš„æ¨è–¦ã€‚

<img src="https://pic.imgdb.cn/item/5e999ffcc2a9a83be5d3a739.jpg" width="700">

<b>æ˜¯å¾ [ops.tips](https://ops.tips/blog/article-recommendation-using-hugo/) é‚£ç§»æ¤éä¾†çš„</b>ï¼Œéå¸¸æ„Ÿè¬ã€‚ï¼ˆå®‰åˆ©ä¸€å¥ï¼Œé€™ç¶²ç«™æŒºå¥½çœ‹çš„ï¼‰é€²è¡Œäº†ä¸‰è™•æ”¹é€²ï¼š

1. ä»–åªç®—äº† `tags`ï¼Œæˆ‘åŠ ä¸Šäº† `categories`ã€`series`ã€‚`notes` ä¸åˆ—å…¥è¨ˆç®—
2. åŠ æ¬Šè¨ˆç®—ï¼Œç³»åˆ—ï½œçš„æ¬Šé‡æ¯” [åˆ†é¡] #æ¨™ç±¤ é«™
3. æ ¹æ“šç›¸é—œæ–‡ç« ç¯‡æ•¸ï¼Œå¯¦è¡Œæ¢¯åº¦å¼·å¼±ç›¸é—œåº¦

é¦–å…ˆçœ‹ç¬¬äºŒé»ã€‚æœ¬ç«™çš„æƒ…æ³æ˜¯ï¼Œå¦‚æœå…©ç¯‡æ–‡ç« çš„ç³»åˆ—ç›¸åŒï¼Œé‚£é—œè¯åº¦æ˜¯æœ€é«˜çš„ï¼Œæˆ‘å€‘å¯ä»¥æ“šæ­¤è¨­ç½® <b>åŠ æ¬Š</b>ï¼Œç³»åˆ—å  4ï¼Œåˆ†é¡ã€æ¨™ç±¤å  3ã€‚æœ‰å¦‚ä¸‹å¯èƒ½ï¼š

| åˆ†é¡ 3 | ç³»åˆ— 4 | æ¨™ç±¤ 3 | ç¸½åˆ† |
| ------ | ------ | ------ | ---- |
| 0      | 0      | 0      | 0    |
| 0      | 0      | 1      | 3    |
| 0      | 0      | 2      | 6    |
| 0      | 0      | 3      | 9    |
| 0      | 1      | 0      | 4    |
| 0      | 1      | 1      | 7    |
| 0      | 1      | 2      | 10   |
| 0      | 1      | 3      | 13   |
| 1      | 0      | 0      | 3    |
| 1      | 0      | 1      | 6    |
| 1      | 0      | 2      | 9    |
| 1      | 0      | 3      | 12   |
| 1      | 1      | 0      | 7    |
| 1      | 1      | 1      | 10   |
| 1      | 1      | 2      | 13   |
| 1      | 1      | 3      | 16   |

`0,3,4,6,7,9,10,12,13,16` 10 ç¨®æƒ…æ³ã€‚æˆ‘å€‘è¨­ç½® `3` `4` `6` `7` `9` `10` `13` 7 æª”ã€‚

ç¬¬ä¸‰é»ï¼Œå¦‚æœä¸€å€‹ç³»åˆ—ç¯‡æ•¸å¾ˆå¤šï¼Œè¶…éäº† 10 ç¯‡ï¼Œé‚£æ¨è–¦è£é¢å…¨æ˜¯é€™ç®‡ç³»åˆ—çš„ï¼Œå…¶ä»–ä¸€äº›ç›¸é—œä½†é—œè¯åº¦å¼±ä¸€äº›çš„æ–‡ç« å°±ä¸æœƒå‡ºç¾ã€‚çˆ²æ”¹é€²é€™å€‹å•é¡Œï¼Œæˆ‘å€‘å¯ä»¥ç”¨å¼·å¼±ç›¸é—œåº¦ç›¸çµåˆçš„æ–¹æ³•ã€‚åˆ†ä¸‰ç¨®æƒ…æ³ã€‚

1. ç›¸é—œç¯‡æ•¸å°‘æ–¼ 10ï¼šç›´æ¥é †åºæ’åˆ—å‰ 10 ç¯‡ã€‚
2. ç›¸é—œç¯‡æ•¸ 11â€”20ï¼šé †åºæ’åˆ—å‰ 5 ç¯‡ï¼›å¼Ÿ 6â€”10 ç¯‡éš¨æ©Ÿé¸å– 2 ç¯‡ï¼›å¼Ÿ 11â€”20 ç¯‡éš¨æ©Ÿé¸å– 3 ç¯‡
3. ç›¸é—œç¯‡æ•¸å¤šæ–¼ 21ï¼šé †åºæ’åˆ—å‰ 5 ç¯‡ï¼›å¼Ÿ 6â€”20 ç¯‡éš¨æ©Ÿé¸å– 3 ç¯‡ï¼›å¼Ÿ 21â€”30 ç¯‡éš¨æ©Ÿé¸å– 2 ç¯‡

æ€è·¯å¦‚ä¸‹ï¼š

1. åˆ—å‡ºæœ¬æ–‡ç« ä¹‹å¤–çš„æ‰€æœ‰æ–‡ç« 
2. åŠ æ¬Šè¨ˆç®—æœ¬æ–‡ç« å’Œå…¶ä»–æ–‡ç« çš„ç´¢å¼•é‡åˆåº¦
3. æŒ‰ç´¢å¼•é‡åˆåº¦é€²è¡Œæ’åº
4. åˆ†åˆ¥ç”Ÿæˆå‰ 5 é …ã€6â€”10 é …ã€11â€”20 é …ã€6â€”20 é …ã€21â€”30 é …
5. æ ¹æ“šä¸åŒæƒ…æ³ï¼Œé€²è¡Œéš¨æ©Ÿé¸å–ã€‚

```html
{{ $current := . }}
{{ $articles := where (where $.Site.Pages ".Kind" "eq" "page" ) ".Title" "!=" $current.Title }}
{{ $3relevant := slice }}
{{ $4relevant := slice }}
{{ $6relevant := slice }}
{{ $7relevant := slice }}
{{ $9relevant := slice }}
{{ $10relevant := slice }}
{{ $13relevant := slice }}
{{ $recommend := slice }}
{{ $5recommend := slice }}
{{ $10recommend := slice }}
{{ $20recommend := slice }}
{{ $30recommend := slice }}
{{ $6to10recommend := slice }}
{{ $6to20recommend := slice }}
{{ $11to20recommend := slice }}
{{ $21to30recommend := slice }}
<!-- åŠ æ¬Šè¨ˆç®—ç´¢å¼•é‡åˆåº¦ -->
{{ range $idx, $article := $articles }}
    {{ $1intersection := len (intersect $article.Params.series $current.Params.series) }}
    {{ $1weighted := mul 4 $1intersection }}
    {{ $2intersection := len (intersect $article.Params.categories $current.Params.categories) }}
    {{ $2weighted := mul 3 $2intersection }}
    {{ $3intersection := len (intersect $article.Params.tags $current.Params.tags) }}
    {{ $3weighted := mul 3 $3intersection }}
    {{ $4weighted  := add $1weighted $2weighted }}
    {{ $5weighted  := add $3weighted $4weighted }}
    {{ if (ge $5weighted 13) }}
        {{ $13relevant = $13relevant | append $article }}
        {{ else if (ge $5weighted 10) }}
            {{ $10relevant = $10relevant | append $article }}
        {{ else if (eq $5weighted 9) }}
            {{ $9relevant = $9relevant | append $article }}
        {{ else if (eq $5weighted 7) }}
            {{ $7relevant = $7relevant | append $article }}
        {{ else if (eq $5weighted 6) }}
            {{ $6relevant = $6relevant | append $article }}
        {{ else if (eq $5weighted 4) }}
            {{ $4relevant = $4relevant | append $article }}
        {{ else if (eq $5weighted 3) }}
            {{ $3relevant = $3relevant | append $article }}
        {{ end }}
{{ end }}
<!-- æ“šç´¢å¼•é‡åˆåº¦æ’åˆ—ç›¸é—œæ–‡ç«  -->
{{ range $13relevant }}
    {{ $recommend = $recommend | append . }}
{{ end }}
{{ range $10relevant }}
    {{ $recommend = $recommend | append . }}
{{ end }}
{{ range $9relevant }}
    {{ $recommend = $recommend | append . }}
{{ end }}
{{ range $7relevant }}
    {{ $recommend = $recommend | append . }}
{{ end }}
{{ range $6relevant }}
    {{ $recommend = $recommend | append . }}
{{ end }}
{{ range $4relevant }}
    {{ $recommend = $recommend | append . }}
{{ end }}
{{ range $3relevant }}
    {{ $recommend = $recommend | append . }}
{{ end }}
<!-- åˆ—å‡ºæ•¸é‡å€é–“ -->
{{- range shuffle (first 5 $recommend) -}}
    {{ $5recommend = $5recommend | append . }}
{{ end }}
{{- range shuffle (first 10 $recommend) -}}
    {{ $10recommend = $10recommend | append . }}
{{ end }}
{{ range shuffle (first 20 $recommend)  }}
    {{ $20recommend = $20recommend | append . }}
{{ end }}
{{ range shuffle (first 30 $recommend) }}
    {{ $30recommend = $30recommend | append . }}
{{ end }}
{{ $6to10recommend = $10recommend | complement  $5recommend | shuffle }}
{{ $6to20recommend = $20recommend | complement  $5recommend | shuffle }}
{{ $11to20recommend = $20recommend | complement  $10recommend | shuffle }}
{{ $21to30recommend = $30recommend | complement  $20recommend | shuffle }}
<!-- æ ¹æ“šç›¸é—œæ–‡ç« ç¯‡æ•¸é€²è¡Œæ¢ä»¶åˆ¤æ–· -->
{{ if ge (len $recommend) 21 }}
    <ul>
    <div>å¼·ç›¸é—œ</div>
    {{- range first 5 $recommend -}}
        <li><a href="{{ .Permalink }}">{{- .Title | safeHTML | markdownify -}}</a></li>
    {{ end }}
    <div>éš¨æ©Ÿæ¬¡å¼·ç›¸é—œ</div>
    {{- range first 3 $6to20recommend -}}
        <li><a href="{{ .Permalink }}">{{- .Title | safeHTML | markdownify -}}</a></li>
    {{ end }}
    <div>éš¨æ©Ÿå¼±ç›¸é—œ</div>
    {{- range first 2  $21to30recommend  -}}
        <li><a href="{{ .Permalink }}">{{- .Title | safeHTML | markdownify -}}</a></li>
    {{ end }}
    </ul>
        {{ else if ge (len $recommend) 11 }}
        <ul>
        <div>å¼·ç›¸é—œ</div>
        {{- range first 5 $recommend -}}
            <li><a href="{{ .Permalink }}">{{- .Title | safeHTML | markdownify -}}</a></li>
        {{ end }}
        <div>éš¨æ©Ÿæ¬¡å¼·ç›¸é—œ</div>
        {{- range first 2 $6to10recommend -}}
            <li><a href="{{ .Permalink }}">{{- .Title | safeHTML | markdownify -}}</a></li>
        {{ end }}
        <div>éš¨æ©Ÿå¼±ç›¸é—œ</div>
        {{- range first 3 $11to20recommend -}}
            <li><a href="{{ .Permalink }}">{{- .Title | safeHTML | markdownify -}}</a></li>
        {{ end }}
        </ul>
            {{ else if le (len $recommend) 10 }}
            <ul>
            <div>å¼·ç›¸é—œ</div>
            {{- range first 10 $recommend -}}
                <li><a href="{{ .Permalink }}">{{- .Title | safeHTML | markdownify -}}</a></li>
            {{ end }}
            </ul>
{{ end }}
```

ä»¥ [è’™æ–‡é€šçš„ç¶“å²è§€â€”â€”<v>ç¶“å­¸æŠ‰åŸ</v>è®€å¾Œï¼ˆé™„æ‘˜éŒ„ï¼‰](/blog/2018/10/29/mgwfts.html) çˆ²ä¾‹ã€‚æœªåŠ æ¬Šï¼š

- éŒ¢ç©†<v>ç¶“å­¸é€šè«–</v>æ‘˜éŒ„
- é™³å£ç”Ÿè«¸æ›¸æ‘˜éŒ„
- å‘¨äºˆåŒè«¸ç¯‡æ‘˜éŒ„
- <v>åŒ—äº¬è®€ç¶“èªªè¨˜</v>è¿°è¦
- æ¢å•“è¶…<v>ä¸­åœ‹è¿‘ä¸‰ç™¾å¹´å­¸è¡“å²</v>è¿°è¦
- é„­ç„åœ°ä½çš„å‡é™â€”â€”<v>ç¦®æ˜¯é„­å­¸</v>è®€å¾Œ
- è”—ç³–æ¶ˆè²»çš„ç¤¾æœƒæ€§â€”â€”<v>ç”œèˆ‡æ¬ŠåŠ›</v>è®€å¾Œ
- ç¶­æŸ¯èˆ‡åº·å¾·çš„å²å­¸æ€æƒ³â€”â€”<v>æ–°ç§‘å­¸</v>è®€å¾Œ
- éœå¸ƒæ–¯é®‘å§†ç­†ä¸‹çš„è˜‡è¯æ¨¡å¼â”€â”€<v>æ¥µç«¯çš„å¹´ä»£</v>è®€å¾Œ
- <v>å…¬ç¾Šå‚³</v>é½Šè¥„å¾©è®äº‹è©®é‡‹å²

åŠ æ¬Šä¹‹å¾Œï¼š

- éŒ¢ç©†<v>ç¶“å­¸é€šè«–</v>æ‘˜éŒ„
- é™³å£ç”Ÿè«¸æ›¸æ‘˜éŒ„
- å‘¨äºˆåŒè«¸ç¯‡æ‘˜éŒ„
- <v>åŒ—äº¬è®€ç¶“èªªè¨˜</v>è¿°è¦
- æ¢å•“è¶…<v>ä¸­åœ‹è¿‘ä¸‰ç™¾å¹´å­¸è¡“å²</v>è¿°è¦
- é„­ç„åœ°ä½çš„å‡é™â€”â€”<v>ç¦®æ˜¯é„­å­¸</v>è®€å¾Œ
- è”—ç³–æ¶ˆè²»çš„ç¤¾æœƒæ€§â€”â€”<v>ç”œèˆ‡æ¬ŠåŠ›</v>è®€å¾Œ
- ç¶­æŸ¯èˆ‡åº·å¾·çš„å²å­¸æ€æƒ³â€”â€”<v>æ–°ç§‘å­¸</v>è®€å¾Œ
- éœå¸ƒæ–¯é®‘å§†ç­†ä¸‹çš„è˜‡è¯æ¨¡å¼â”€â”€<v>æ¥µç«¯çš„å¹´ä»£</v>è®€å¾Œ
- è‰¾å› å“ˆå¾·ç­†ä¸‹çš„æŸ»ç†å¤§å¸â€”â€”<v>æŸ»ç†å¤§å¸å‚³</v>è®€å¾Œ

å€åˆ¥ä¸å¤§ã€‚åªæœ‰æœ€å¾Œä¸€é …ä¸ä¸€æ¨£ï¼Œè¢«æ›æˆäº†è®€æ›¸ç­†è¨˜ã€‚å†åŠ å…¥äº†å¼·å¼±ç›¸é—œåº¦ä¹‹å¾Œï¼Œå¾Œ 5 é …ï¼š

- è”—ç³–æ¶ˆè²»çš„ç¤¾æœƒæ€§â€”â€”ç”œèˆ‡æ¬ŠåŠ›è®€å¾Œ
- äºå±±æ°´å¤ç´ç·´ç¿’æ›²é›†æŒ‡è¦
- ä¿ç½—Â·èŠ®æ©æ–½å¹³æ°‘æ”¿æ²»çš„åŸºæœ¬åŸç†è¿°è¦
- é›·æ¬¡å®—ç•¥æ³¨å–ªæœç¶“å‚³ç–è­°
- è³‡æºï½œæ–‡å²é¡ç¶²è·¯å­¸è¡“è³‡æº

å‡ºç¾äº†ä¸æ˜¯è®€æ›¸ï½œç³»åˆ—çš„å…§å®¹ã€‚æ•ˆæœä¸éŒ¯ã€‚

ä»¥ [èµ°ä¹‹å‰å»é«™ é›„èµ°ä¸€èµ°](/blog/2018/01/20/gcxs.html) çˆ²ä¾‹ï¼Œåˆ†é¡ï¼š[ç”Ÿæ´»]ï¼Œç³»åˆ—ï¼šç«‹è¨€è¨˜ï½œï¼Œæ¨™ç±¤ï¼š#è‡ºç£ã€‚ç›´æ¥åˆ—å‡ºé‡åˆåº¦å‰åï¼š

- åœ¨è¼”ä»å¤§å­¸äº¤æ›æ˜¯æ€æ¨£çš„é«”é©—ï¼Ÿ
- è‡ºç£çš„å¹¾ç®‡å­”å»Ÿ
- 2018 äºŒã€‡ä¸€å…«
- æˆ‘â¤åºœåŸâ”€â”€åºœåŸå®¢é‹
- æ•…å®®å’Œè˜†æ´²
- æ˜Ÿçˆ¸æ˜Ÿåª½çš„å¤©ç©º
- åŸº kee éš† lung
- å‹•ç‰©åœ’ç‹‚ç™¼ç…§ç‰‡
- å…©æ¬¡éŠè¡Œ
- è‡ºç£ã„Ÿå¤§å­¸éš¨æ‹

éƒ½æ˜¯ç«‹è¨€è¨˜ï½œçš„å…§å®¹ã€‚çµåˆäº†å¼·å¼±ç›¸é—œåº¦ä¹‹å¾Œçš„å¾Œ 5 é …ï¼š

- æ¨‚å±±å¤§ä½›çš„çŸ³çªŸ
- å‹•ç‰©åœ’ç‹‚ç™¼ç…§ç‰‡
- æ˜Ÿçˆ¸æ˜Ÿåª½çš„å¤©ç©º
- ä¸€äº›ã’³åˆè©å½™ã€è®€éŸ³å°ç…§
- è‡ºç£è¨ªç´è¨˜

æ•ˆæœä¸éŒ¯ã€‚

### æ²’æœ‰å–œæ­¡çš„ï¼Ÿé€™è£å‘¢

åœ¨æ­¤åŸºç¤ä¸Šï¼Œæˆ‘å€‘å¯ä»¥æœ‰ä»£è¡¨æ€§åœ°ç”Ÿæˆèˆ‡æ­¤ä¸ç›¸é—œçš„æ–‡ç« ï¼š

1. åˆ—å‡ºæ‰€æœ‰åˆ†é¡ï¼Œæ¯å€‹åˆ†é¡éš¨æ©Ÿç”¢ç”Ÿä¸€é …æ–‡ç« 
2. ç”Ÿæˆæ‰€æœ‰ä¸æ˜¯æœ¬æ–‡ç« ã€åˆ†é¡ç³»åˆ—æœ‰é‡åˆçš„æ–‡ç« ï¼ŒåŠå…¶ä»– `section` çš„æ–‡ç« 
3. ç”Ÿæˆ 1 å’Œ 2 çš„äº¤é›†
4. åœ¨é€™ä¸€äº¤é›†ä¸­éš¨æ©Ÿç”¢ç”Ÿ 5 é …æ–‡ç« 

```html
{{ $categories := slice }}
{{ range .Site.Taxonomies.categories.ByCount }}
    {{ with .Pages | shuffle }}
        {{ $cate := . }}
        {{ range first 1 $cate }}
            {{ $categories =  $categories | append  . }}
        {{ end }}
    {{ end }}
{{ end }}
{{ $current := slice }}
{{ $current = $current | append . }}
{{ $other := $.Site.RegularPages |  complement $current $recommendedArticles (where .Site.RegularPages "Type" "gallery") (where .Site.RegularPages "Type" "block")  (where .Site.RegularPages "Type" "zanfu") (where .Site.RegularPages "Type" "xuekan") | shuffle }}
{{ $others := intersect  $categories  $other }}
<ul>
    {{  range first 5 $others | shuffle }}
        <li><a href="{{ .Permalink }}">{{- .Title -}}</a></li>
    {{ end }}
</ul>
```

éš¨æ©Ÿæ¨è–¦ä¸‹é¢ä¸€è¡Œæœ‰å€‹å‘ï¼Œå¦‚æœç›´æ¥å¯«æˆé€™æ¨£ï¼š

```
{{ range .Site.Taxonomies.categories.ByCount }}
    {{ range first 1 .Pages | shuffle }}  
        {{ $categories =  $categories | append  . }}
    {{ end }}
{{ end }}
```

æ˜¯ä¸èƒ½éš¨æ©Ÿçš„ï¼Œç”¢ç”Ÿçš„éƒ½æ˜¯å„åˆ†é¡ä¸­ç™¼å¸ƒæ™‚é–“æœ€è¿‘çš„ä¸€é …æ–‡ç« ã€‚æ‰€ä»¥æˆ‘ç”¨äº†è¿‚è¿´çš„æ–¹æ³•ã€‚

## æ¨å»£

å¦‚æœé…åˆ GitHub Actionsï¼Œå®šæ™‚é‡æ–°ç”Ÿæˆï¼Œé‚£é€™äº›éš¨æ©Ÿçš„æ¨è–¦å¯ä»¥è®“éœæ…‹ç¶²é è®ŠæˆåŠå‹•æ…‹ç¶²é ï¼Œè±ˆä¸ç¾å“‰ï¼

æ¡ˆï¼šæœ¬ç«™å·²å¯¦ç¾ [å®šæ™‚ç”Ÿæˆ](/226)ã€‚
